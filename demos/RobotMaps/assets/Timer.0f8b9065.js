import{_ as F,a as R,b as J}from"./index.632b0bf4.js";import{T as M}from"./TimePicker.2e3e6fe2.js";import{P as E}from"./PickerBox.b315c901.js";import{v as H,u as $,D as q,a as z,p as r,j as N,o as c,b as u,k as P,i as e,t as i,E as b,G,w as C,F as S,q as D,z as U,n as w,P as I,Q as B}from"./vendor.dfe6942c.js";import{b as K}from"./config.f80ebd36.js";import{_ as y}from"./open.72cf3b93.js";const L={components:{TimePicker:M,PickerBox:E},setup(){const{t:s}=H(),a=$(),g=q(),t=z(),p=r(""),h=r(""),m=r([]),_=r(0),v=r(null),n=r(null),l=r(a.state.snst!=="SC3"?`05'00"`:`00'01"`),d=r(0),f=r("");if(g.params.selected){const o=JSON.parse(g.params.selected);p.value=o.name||"",h.value=o.date||"",m.value=o.week,_.value=o.point?1:0,o.route&&(v.value=o.route),o.point&&(n.value=o.point),o.time&&(l.value=o.time),d.value=o.uvc||0,o.uuid&&(f.value=o.uuid)}function V(o){v.value=o}function j(o){n.value=o}function O(){const o=window.loading(s("top.DeTa"));R.sc.del({sn:a.state.sn,uuid:f.value}).then(()=>{t.back()}).catch(T=>alert(T.message)).finally(()=>o.remove())}function W(){if(!p.value)return window.toast(s("top.TaNa"));if(!h.value)return window.toast(s("top.ReTP"));if(!m.value.length)return window.toast(s("top.ChRD"));const o={sn:a.state.sn,name:p.value,task_type:1,week_day:JSON.stringify(m.value),trigger_time:h.value,stay_time:J(l.value),disinfect_move:a.state.snst==="SC3"?1:d.value,go_home:1};if(f.value&&(o.uuid=f.value),_.value===0){if(!v.value)return window.toast(s("top.DiRo"));o.cruise_id_list=JSON.stringify(v.value.map(k=>k.uuid))}else{if(!n.value)return window.toast(s("top.ChWa"));o.point_id_list=JSON.stringify(n.value.map(k=>k.uuid))}const T=window.loading(s("top.CrTa"));R.sc.update(o).then(()=>{window.toast(s("top.Comp")),t.back()}).catch(k=>alert(k.message)).finally(()=>T.remove())}return{name:p,date:h,week:m,type:_,route:v,point:n,time:l,uvc:d,selectUuid:f,timeFormat:K,routeChoose:V,pointChoose:j,delTimer:O,confirm:W}}},Q={class:"v-sc-timer"},A={class:"row"},X={class:"name"},Y={class:"value"},Z={class:"name"},x={class:"value"},ee={class:"select-btn"},se={class:"select-name"},te=e("img",{class:"select-icon",src:y,alt:"\u2193"},null,-1),oe={class:"row"},ae={class:"name"},ne={class:"value space"},ie=["value"],le={class:"checkbox-name"},ce=e("div",{class:"line"},null,-1),de={class:"row"},re={class:"name"},ue={class:"value"},ve=["value"],me={class:"radio-name"},_e={class:"name"},pe={class:"value"},he={class:"select-btn"},fe={class:"select-name"},ke=e("img",{class:"select-icon",src:y,alt:"\u2193"},null,-1),be={class:"name"},Ce={class:"value"},we={class:"select-btn"},ye={class:"select-name"},ge=e("img",{class:"select-icon",src:y,alt:"\u2193"},null,-1),Te={class:"name"},Ne={class:"value"},Pe={class:"select-btn"},Se={class:"select-name"},De=e("img",{class:"select-icon",src:y,alt:"\u2193"},null,-1),Re={key:2,class:"row"},Ue={class:"name"},Be={class:"value"},Ve=["value"],je={class:"radio-name"},Oe={class:"btns"};function We(s,a,g,t,p,h){const m=N("Navbar"),_=N("TimePicker"),v=N("PickerBox");return c(),u("div",Q,[P(m,{class:"navbar",title:s.$t("sc.TaEd"),light:""},null,8,["title"]),e("div",A,[e("div",X,i(s.$t("sc.TaNa")),1),e("label",Y,[b(e("input",{class:"value-input",type:"text","onUpdate:modelValue":a[0]||(a[0]=n=>t.name=n)},null,512),[[G,t.name]])])]),P(_,{class:"row",value:t.date,"onUpdate:value":a[1]||(a[1]=n=>t.date=n),format:"HH:MM"},{default:C(()=>[e("div",Z,i(s.$t("sc.StTi")),1),e("div",x,[e("div",ee,[e("span",se,i(t.date||s.$t("sc.ChCh")),1),te])])]),_:1},8,["value"]),e("div",oe,[e("div",ae,i(s.$t("sc.WeeK")),1),e("div",ne,[(c(!0),u(S,null,D(JSON.parse(s.$t("sc.$Wee")),(n,l)=>(c(),u("label",{class:"checkbox-item",key:l},[b(e("input",{class:"checkbox-input",type:"checkbox",name:"week","onUpdate:modelValue":a[2]||(a[2]=d=>t.week=d),value:l},null,8,ie),[[I,t.week]]),e("span",le,i(n),1)]))),128))])]),ce,e("div",de,[e("div",re,i(s.$t("sc.Type")),1),e("div",ue,[(c(!0),u(S,null,D([s.$t("sc.Rout"),s.$t("sc.Wayp")],(n,l)=>(c(),u("label",{class:"radio-item",key:l},[b(e("input",{class:"radio-input",type:"radio",name:"type","onUpdate:modelValue":a[3]||(a[3]=d=>t.type=d),value:l},null,8,ve),[[B,t.type]]),e("span",me,i(n),1)]))),128))])]),t.type===0?(c(),U(v,{key:0,class:"row",type:"route",value:t.route,title:s.$t("sc.CDRo"),onChoose:t.routeChoose},{default:C(()=>[e("div",_e,i(s.$t("sc.sRou")),1),e("div",pe,[e("div",he,[e("span",fe,i(t.route?s.$t("sc.Chos")+": "+t.route.length:s.$t("sc.ChCh")),1),ke])])]),_:1},8,["value","title","onChoose"])):w("",!0),t.type!==0?(c(),U(v,{key:1,class:"row",type:"point",value:t.point,title:s.$t("sc.CDWa"),onChoose:t.pointChoose},{default:C(()=>[e("div",be,i(s.$t("sc.Wayp")),1),e("div",Ce,[e("div",we,[e("span",ye,i(t.point?s.$t("sc.Chos")+": "+t.point.length:s.$t("sc.ChCh")),1),ge])])]),_:1},8,["value","title","onChoose"])):w("",!0),P(_,{class:"row",value:t.time,"onUpdate:value":a[4]||(a[4]=n=>t.time=n),format:t.timeFormat},{default:C(()=>[e("div",Te,i(s.$t("sc.DiTi")),1),e("div",Ne,[e("div",Pe,[e("span",Se,i(t.time),1),De])])]),_:1},8,["value","format"]),s.$store.state.snst!=="SC3"?(c(),u("div",Re,[e("div",Ue,i(s.$t("sc.UVCD")),1),e("div",Be,[(c(!0),u(S,null,D([s.$t("sc.FiPo"),s.$t("sc.OnTW")],(n,l)=>(c(),u("label",{class:"radio-item",key:l},[b(e("input",{class:"radio-input",type:"radio",name:"uvc","onUpdate:modelValue":a[5]||(a[5]=d=>t.uvc=d),value:l},null,8,Ve),[[B,t.uvc]]),e("span",je,i(n),1)]))),128))])])):w("",!0),e("div",Oe,[e("div",{class:"btn cancel",onClick:a[6]||(a[6]=n=>s.$router.back())},i(s.$t("btn.Canc")),1),t.selectUuid?(c(),u("div",{key:0,class:"btn delete",onClick:a[7]||(a[7]=(...n)=>t.delTimer&&t.delTimer(...n))},i(s.$t("btn.Dele")),1)):w("",!0),e("div",{class:"btn confirm",onClick:a[8]||(a[8]=(...n)=>t.confirm&&t.confirm(...n))},i(s.$t("btn.Ok")),1)])])}var qe=F(L,[["render",We]]);export{qe as default};
