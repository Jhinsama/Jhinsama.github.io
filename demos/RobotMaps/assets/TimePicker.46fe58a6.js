import{_ as P,S as Z,n as v}from"./index.101c31c3.js";import{x as q,p as u,C as D,j as G,o as c,b as f,r as I,z as _,i,w as S,F as p,q as B,y as b,t as L,n as C,T as J}from"./vendor.dfe6942c.js";const K={components:{Scroll:Z},emits:["confirm","update:value"],props:{value:String,format:{type:String,default:"HH:MM:SS"}},setup(s,{emit:o}){const T=new Array(24).fill().map((r,e)=>v(e)),t=new Array(60).fill().map((r,e)=>v(e)),A=new Array(60).fill().map((r,e)=>v(e)),E=q(()=>({HH:/HH/.test(s.format),MM:/MM/.test(s.format),SS:/SS/.test(s.format)})),m=u(!1),n=u(null),a=u(null),j=u(null),w=u(null),x=u(null),H=u(null),h=u(0),k=u(0),M=u(null);D(()=>s.value,R,{immediate:!0});function R(r){var l;if(typeof r!="string")return;const e=(l=new RegExp(s.format.replace(/\(|\)|\[|\]|\{|\}/g,d=>"\\"+d).replace(/HH|MM|SS/g,"(\\d{1,2})")).exec(r))==null?void 0:l.splice(1);!e||(/HH/.test(s.format)||e.splice(0,0,0),/MM/.test(s.format)||e.splice(1,0,0),/SS/.test(s.format)||e.splice(2,0,0),e[2]&&/SS/.test(s.format)&&(M.value=Number(e[2])),e[1]&&/MM/.test(s.format)&&(k.value=Number(e[1])),e[0]&&/HH/.test(s.format)&&(h.value=Number(e[0])))}function O({y:r},e){if(e==="hour"){h.value=g(r,w.value.children);return}if(e==="minute"){k.value=g(r,x.value.children);return}if(e==="seconds"){M.value=g(r,H.value.children);return}return!0}function F(r,e){if(r==="hour"){const l=Math.round(h.value);return n.value.scrollTo(0,w.value.children[l].offsetTop,e)}if(r==="minute"){const l=Math.round(k.value);return a.value.scrollTo(0,x.value.children[l].offsetTop,e)}if(r==="seconds"){const l=Math.round(M.value);return j.value.scrollTo(0,H.value.children[l].offsetTop,e)}}function g(r,e){for(let l=0;l<e.length;l++){const d=e[l].offsetTop,y=e[l].offsetHeight;if(r>y+d)continue;return~~((r-d)/y+l).toFixed(1)}return e.length}function V(r,e){const l=Math.abs(e-r);if(l>1)return null;const d=.8*(1-l)+.2,y=.2*(1-l)+.8;return{opacity:d,transform:`scale(${y}) translateZ(0)`}}function N(){m.value=!1,R(s.value)}function z(){const r=h.value,e=k.value,l=M.value,d=s.format.replace("HH",v(Math.round(r<0?0:r>23?23:r))).replace("MM",v(Math.round(e<0?0:e>59?59:e))).replace("SS",v(Math.round(l<0?0:l>59?59:l)));o("update:value",d),N()}return{hourArr:T,minuteArr:t,secondsArr:A,formatObj:E,show:m,hourRef:n,minuteRef:a,secondsRef:j,hourBox:w,minuteBox:x,secondsBox:H,hour:h,minute:k,seconds:M,setStyle:V,onScroll:O,onScrollEnd:F,cancel:N,confirm:z}}},Q={key:0,class:"c-timepicker-box"},U=i("div",{class:"c-timepicker-bg"},null,-1),W={class:"c-timepicker-main"},X={class:"c-timepicker-inner"},Y={ref:"hourBox",style:{position:"relative"}},$=i("div",{class:"c-timepicker-u"},"H",-1),ee={ref:"minuteBox",style:{position:"relative"}},te=i("div",{class:"c-timepicker-u"},"M",-1),oe={ref:"secondsBox",style:{position:"relative"}},ne=i("div",{class:"c-timepicker-u"},"S",-1),re={class:"c-timepicker-btns"},le=i("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},[i("path",{d:"M13.6211927,11.7955031 L23.2154173,2.20127846 C23.7186109,1.69808486 23.7173207,0.882653184 23.2141271,0.378169344 C22.7096433,-0.125024256 21.8942116,-0.126314496 21.3897277,0.376879104 L11.7967933,9.97110374 L2.20127846,0.376879104 C1.69808486,-0.126314496 0.882653184,-0.125024256 0.378169344,0.378169344 C-0.125024256,0.882653184 -0.126314496,1.69808486 0.376879104,2.20127846 L9.97239398,11.7955031 L0.376879104,21.391018 C-0.125024256,21.8929213 -0.125024256,22.7070628 0.375588864,23.2115466 L0.378169344,23.2141271 C0.631056384,23.4657239 0.960067584,23.5921674 1.29036902,23.5921674 C1.62067046,23.5921674 1.94968166,23.4670141 2.20127846,23.2154173 L11.7967933,13.6199025 L21.3897277,23.2154173 C21.6426148,23.4670141 21.971626,23.5921674 22.3019274,23.5921674 C22.6309386,23.5921674 22.9612401,23.4657239 23.2141271,23.2141271 C23.7173207,22.7096433 23.7186109,21.8942116 23.2154173,21.391018 L13.6211927,11.7955031 Z",fill:"#333333"})],-1),ie=[le],se=i("svg",{viewBox:"0 0 37 25",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"37",height:"25"},[i("path",{d:"M12.0990966,24.8762143 C11.4475254,24.8762143 10.8346614,24.6233272 10.3740457,24.1627116 L0.441778176,15.5116524 C-0.094961664,15.0432952 -0.150441984,14.2291538 0.317915136,13.6911237 C0.784982016,13.1530936 1.59912346,13.0976133 2.13844378,13.5659704 L12.0952259,22.2441247 L33.9596329,0.378427392 C34.4628265,-0.126056448 35.2795484,-0.126056448 35.7840323,0.378427392 C36.2885161,0.881620992 36.2885161,1.69834291 35.7840323,2.20282675 L13.8241475,24.1627116 C13.364822,24.6233272 12.751958,24.8762143 12.0990966,24.8762143",fill:"#333333"})],-1),ce=[se];function ae(s,o,T,t,A,E){const m=G("Scroll");return c(),f("div",{class:"c-timepicker",onClick:o[11]||(o[11]=n=>t.show=!0)},[I(s.$slots,"default"),(c(),_(J,{to:"#app"},[t.show?(c(),f("div",Q,[U,i("div",W,[i("div",X,[t.formatObj.HH?(c(),_(m,{key:0,class:"c-timepicker-s",y:"",hideBar:"",ref:"hourRef",onMounted:o[0]||(o[0]=n=>t.onScrollEnd("hour",1)),onScroll:o[1]||(o[1]=n=>t.onScroll(n,"hour")),onScrollend:o[2]||(o[2]=n=>t.onScrollEnd("hour"))},{fixed:S(()=>[$]),default:S(()=>[i("div",Y,[(c(!0),f(p,null,B(t.hourArr,(n,a)=>(c(),f("div",{class:"c-timepicker-i",style:b(t.setStyle(a,t.hour)),key:a},L(n),5))),128))],512)]),_:1},512)):C("",!0),t.formatObj.MM?(c(),_(m,{key:1,class:"c-timepicker-s",y:"",hideBar:"",ref:"minuteRef",onMounted:o[3]||(o[3]=n=>t.onScrollEnd("minute",1)),onScroll:o[4]||(o[4]=n=>t.onScroll(n,"minute")),onScrollend:o[5]||(o[5]=n=>t.onScrollEnd("minute"))},{fixed:S(()=>[te]),default:S(()=>[i("div",ee,[(c(!0),f(p,null,B(t.minuteArr,(n,a)=>(c(),f("div",{class:"c-timepicker-i",style:b(t.setStyle(a,t.minute)),key:a},L(n),5))),128))],512)]),_:1},512)):C("",!0),t.formatObj.SS?(c(),_(m,{key:2,class:"c-timepicker-s",y:"",hideBar:"",ref:"secondsRef",onMounted:o[6]||(o[6]=n=>t.onScrollEnd("seconds",1)),onScroll:o[7]||(o[7]=n=>t.onScroll(n,"seconds")),onScrollend:o[8]||(o[8]=n=>t.onScrollEnd("seconds"))},{fixed:S(()=>[ne]),default:S(()=>[i("div",oe,[(c(!0),f(p,null,B(t.secondsArr,(n,a)=>(c(),f("div",{class:"c-timepicker-i",style:b(t.setStyle(a,t.seconds)),key:a},L(n),5))),128))],512)]),_:1},512)):C("",!0)]),i("div",re,[i("div",{class:"c-timepicker-btn",onClick:o[9]||(o[9]=(...n)=>t.cancel&&t.cancel(...n))},ie),i("div",{class:"c-timepicker-btn",onClick:o[10]||(o[10]=(...n)=>t.confirm&&t.confirm(...n))},ce)])])])):C("",!0)]))])}var me=P(K,[["render",ae]]);export{me as T};
