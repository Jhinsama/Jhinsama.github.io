!function(t,e,s){"use strict";t.DatePicker||(c.prototype={init:function(t){this.createPicker(),this.format=this.initFormat(t),this.initInputs(),this.api={set:this.set.bind(this),join:"/",show:this.showPicker.bind(this),value:"",refresh:this.refresh.bind(this),callback:function(t){console.log(JSON.stringify(t))}}},set:function(t,e){this.isInput(t)&&(e instanceof Object||(this.datas[t.bindId]?e={offset:d(t)}:(r(t,"focus",this.showPicker.bind(this,t)),e={offset:d(t),max:null,min:null,format:this.format,range:null,bind:null}),this.setInput(t,e)))},createPicker:function(){var t=i("style");t.type="text/css",t.innerHTML="",e.getElementsByTagName("head")[0].appendChild(t);var s=this.doms.box=i("div");s.className="-date-picker";s.innerHTML="            <div id='-date-picker-point'>                <div class='-rotate45'></div>            </div>            <div class='-date-picker-main'>                <div id='-date-picker-main'></div>            </div>",e.body.appendChild(s),this.reSize(),this.getElement()},createSelectBox:function(){var t=i("div");t.className="-date-picker-select",t.innerHTML="            <div class='-d-p-select-head'>                <div id='-d-p-select-head'></div>            </div>            <div class='-d-p-select-year-month'>                <div id='-d-p-select-main'></div>            </div>            <div class='-d-p-select-foot'>                <button>返回</button>            </div>",this.doms.main.appendChild(t),this.getElement(2)},createDayBox:function(){var t=i("div"),e=i("div"),s=i("div");n(t,"-date-picker-head"),n(e,"-date-picker-day"),n(s,"-date-picker-btn"),t.innerHTML="            <div>                <div class='-date-picker-ym'>                    <button id='-date-picker-ym'></button>                    <span class='-dpcymt -rotate45'></span>                </div>            </div>",s.innerHTML="            <div>                <div id='-date-picker-btn-tday'><button>今&emsp;天</button></div>                <div id='-date-picker-btn-ystday'><button>昨&emsp;天</button></div>                <div id='-date-picker-btn-lsweek'><button>上一周</button></div>                <div id='-date-picker-btn-lsmonth'><button>上一月</button></div>                <div id='-date-picker-btn-hour'><button>00</button></div>                <div id='-date-picker-btn-minute'><button>00</button></div>                <div id='-date-picker-btn-second'><button>00</button></div>                <div id='-date-picker-btn-confirm'><button>确定</button></div>            </div>";for(var a="            <div>                <div class='-date-picker-title'>",r=0;r<this.week.length;r++)a+="<button class=''>",a+=this.week[r],a+="</button>";a+="                </div>                <div id='-date-picker-prev'>                    <div class='-rotate45'></div>                </div>                <div class='-date-picker-box'>                    <div id='-date-picker-year' data-month='0' style='transition:transform 300ms;'>                        <div class='-prev-year'>上一年</div>";for(r=1;r<13;r++)a+="<div class='-date-picker-month'><div class='-bg-month'>",a+=r,a+="</div></div>";a+="                        <div class='-next-year'>下一年</div>                    </div>                </div>                <div id='-date-picker-next'>                    <div class='-rotate45'></div>                </div>            </div>",e.innerHTML=a,this.doms.main.appendChild(t),this.doms.main.appendChild(e),this.doms.main.appendChild(s),this.getElement(1)},createMonthBox:function(){this.state.step[2]||this.createSelectBox();var t=i("div"),e=i("div"),s="";t.id="-d-p-select-year-touch",n(e,"-d-p-s-month-box"),t.innerHTML="            <div class='-d-p-select-left'></div>            <div class='-d-p-select-box'>                <div id='-d-p-select-year'></div>            </div>            <div class='-d-p-select-right'></div>";for(var a=0;a<12;a++)s+="<div class='-d-p-s-month' data-month='",s+=a+1,s+="'><div>",s+=this.month[a],s+="月<div class='-d-p-s-m-en'>",s+=this.monthEn[a],s+="</div></div></div>";e.innerHTML=s,this.doms.selectHead.appendChild(t),this.doms.selectMain.appendChild(e),this.getElement(3)},createYearBox:function(){this.state.step[2]||this.createSelectBox();var t=i("button"),e=i("div");n(e,"-d-p-s-year-box"),e.innerHTML="            <div id='-d-p-s-year-prev'>                <div class='-rotate45'></div>            </div>            <div class='-d-p-s-y-box'>                <div id='-d-p-s-y-box'></div>            </div>            <div id='-d-p-s-year-next'>                <div class='-rotate45'></div>            </div>",t.id="-d-p-select-year-range",this.doms.selectHead.appendChild(t),this.doms.selectMain.appendChild(e),this.getElement(4)},getElement:function(t){t=t||0;var s=this.doms,i=s.box,a=e.getElementById.bind(e);switch(t){case 0:s.point=a("-date-picker-point"),s.main=a("-date-picker-main");break;case 1:s.btn=a("-date-picker-ym"),s.btnBox=s.btn.parentElement,s.year=a("-date-picker-year"),s.dayBox=s.year.parentElement,s.months=o(i,"-date-picker-month"),s.prevMonth=a("-date-picker-prev"),s.nextMonth=a("-date-picker-next"),s.today=a("-date-picker-btn-tday"),s.yesterday=a("-date-picker-btn-ystday"),s.lastweek=a("-date-picker-btn-lsweek"),s.lastmonth=a("-date-picker-btn-lsmonth"),s.hour=a("-date-picker-btn-hour"),s.hourBtn=s.hour.children[0],s.minute=a("-date-picker-btn-minute"),s.minuteBtn=s.minute.children[0],s.second=a("-date-picker-btn-second"),s.secondBtn=s.second.children[0],s.confirm=a("-date-picker-btn-confirm");break;case 2:s.selectHead=a("-d-p-select-head"),s.selectMain=a("-d-p-select-main");break;case 3:s.touchBox=a("-d-p-select-year"),s.yearDrag=a("-d-p-select-year-touch"),s.monthBtns=o(i,"-d-p-s-month"),s.monthBox=s.monthBtns[0].parentElement;break;case 4:s.yearRnage=a("-d-p-select-year-range"),s.prevYear=a("-d-p-s-year-prev"),s.nextYear=a("-d-p-s-year-next"),s.yearBox=a("-d-p-s-y-box")}this.state.step||(this.state.step={}),this.state.step[t]||this.initEvent(t),this.state.step[t]=!0},initEvent:function(e){var s=r,i=this.doms;switch(e){case 0:s(t,"resize",this.reSize.bind(this)),s(i.box,"touchmove",this.disabledEvent);break;case 1:var a=i.dayBox;s(i.btnBox,"click",this.clickEv.bind(this,i.btnBox)),s(i.prevMonth,"click",this.prevMonth.bind(this)),s(i.nextMonth,"click",this.nextMonth.bind(this)),s(a,"click",this.clickEv.bind(this,a)),s(a,"touchstart",this.touchS.bind(this,a)),s(a,"touchmove",this.touchM.bind(this,a)),s(a,"touchend",this.touchE.bind(this,a)),s(a,"touchcancel",this.touchE.bind(this,a)),this.isFF?s(a,"DOMMouseScroll",this.mouseW.bind(this,a)):s(a,"mousewheel",this.mouseW.bind(this,a));break;case 3:var n=i.yearDrag;s(i.monthBox,"click",this.clickEv.bind(this,i.monthBox)),s(n,"click",this.clickEv.bind(this,n)),s(n,"touchstart",this.touchS.bind(this,n)),s(n,"touchmove",this.touchM.bind(this,n)),s(n,"touchend",this.touchE.bind(this,n)),s(n,"touchcancel",this.touchE.bind(this,n)),this.isFF?s(n,"DOMMouseScroll",this.mouseW.bind(this,n)):s(n,"mousewheel",this.mouseW.bind(this,n));break;case 4:var o=i.yearBox;s(i.prevYear,"click",this.clickEv.bind(this,i.prevYear)),s(i.nextYear,"click",this.clickEv.bind(this,i.nextYear)),s(o,"touchstart",this.touchS.bind(this,o)),s(o,"touchmove",this.touchM.bind(this,o)),s(o,"touchend",this.touchE.bind(this,o)),s(o,"touchcancel",this.touchE.bind(this,o)),this.isFF?s(o,"DOMMouseScroll",this.mouseW.bind(this,o)):s(o,"mousewheel",this.mouseW.bind(this,o))}},reSize:function(){var t=this.doms.box;t.style.visibility="hidden",a(t,"block"),this.state.boxWidth=t.offsetWidth,this.state.boxHeight=t.offsetHeight,a(t,"none"),t.style.visibility="visible"},refresh:function(){for(var t in this.datas)this.set(this.datas[t].el)},disabledEvent:function(e){return(e=e||t.event).preventDefault&&e.preventDefault(),e.stopPropagation&&event.stopPropagation(),!1},blurPicker:function(e){var s=!0;if((e=e||t.event).target!=t){var i=h(e.target,".-date-picker"),a=h(e.target,"input");if(i)s=!1;else if(a)for(var n in this.datas)if(this.datas[n].el===a){s=!1;break}}s&&(this.hidePicker(),this.endSelect())},hidePicker:function(){a(this.doms.box,"none"),this.state.date=void 0,this.state.focus=void 0,this.maxDate=void 0,this.minDate=void 0},initInputs:function(){for(var t={},s=o(e,"datepicker"),i=0;i<s.length;i++){var a=s[i];if(this.isInput(a)){r(a,"focus",this.showPicker.bind(this,a));(c={min:a.getAttribute("min"),max:a.getAttribute("max"),bind:a.getAttribute("bind"),range:a.getAttribute("range"),format:this.initFormat(a.getAttribute("format")),offset:d(a)}).min&&"now"!=c.min&&"string"==typeof c.min&&!c.min.match(/[YMD]\d+(?!\d)/g)&&(c.min=this.judgeDateStr(c.min,c.format)),c.max&&"now"!=c.max&&"string"==typeof c.max&&!c.max.match(/[YMD]\d+(?!\d)/g)&&(c.max=this.judgeDateStr(c.max,c.format)),c.range&&c.bind&&"start"==c.range||"end"==c.range?(t[c.bind]||(t[c.bind]={}),t[c.bind][c.range]||(t[c.bind][c.range]={el:a,op:c})):this.setInput(a,c)}}for(var n in t){var h=t[n];if(h.start&&h.end){var c;(c={min:h.end.op.min||h.start.op.min,max:h.end.op.max||h.start.op.max,format:h.end.op.format||h.start.op.format}).bindElId=h.end.el.bindId,c.range="start",c.offset=h.start.offset,this.setInput(h.start.el,c),c.bindElId=h.start.el.bindId,c.range="end",c.offset=h.end.offset,this.setInput(h.end.el,c)}else{var l=h.start||h.end;l.op.range="self",this.setInput(l.el,l.op)}}},isInput:function(t){return!(!t||!t.nodeType||1!=t.nodeType||"input"!=t.nodeName.toLowerCase())},setInput:function(t,e){t.bindId||(t.bindId=++this.maxId);var s=t.bindId;this.datas[s]||(this.datas[s]={el:t});for(var i in e)this.datas[s][i]=e[i];t.type="text"},initFormat:function(t){var e=this.format||{str:"YYYY-MM-DD"};if("string"!=typeof t)return e;if(/\d/.test(t))return e;var s={str:t};return/YYYY(?!Y)/.test(t)&&(s.Y=!0),/MM(?!M)/.test(t)&&(s.M=!0),/DD(?!D)/.test(t)&&(s.D=!0),/hh(?!h)/.test(t)&&(s.h=!0),/mm(?!m)/.test(t)&&(s.m=!0),/ss(?!s)/.test(t)&&(s.s=!0),s},showPicker:function(e){if(e&&e.bindId){e.blur(),this.endSelect(),this.state.focus=this.datas[e.bindId],this.state.date=this.getDate(),this.judgeRange();var s=this.initPicker();a(this.doms.box,"block"),t.scrollTo(0,s)}},endSelect:function(){},initPicker:function(){var e=this.state,s=e.date,i=e.focus,r=i.format||this.format,o=this.doms,h=o.box,d=o.point;if(r.D||r.h||r.m||r.s)if(n(h,"-date-picker"),s.Y==e.Y&&s.M==e.M||this.setCurrent(s.Y,s.M),r.h||r.m||r.s)a([o.hour,o.minute,o.second,o.confirm],"inline-block"),a([o.today,o.yesterday,o.lastweek,o.lastmonth],"none"),o.hourBtn.innerText=s.hs,o.minuteBtn.innerText=s.ms,o.secondBtn.innerText=s.ss;else{a([o.hour,o.minute,o.second,o.confirm],"none"),a([o.today,o.yesterday,o.lastweek,o.lastmonth],"inline-block");var c=s.d-this.minDate.d;n([o.today,o.yesterday,o.lastweek,o.lastmonth],"un"),c>0&&(n(o.today,""),(c-=36e5*s.h+6e4*s.m+1e3*s.s+s.d.getMilliseconds())>0&&(n(o.yesterday,""),i.range&&(c-864e5*s.w>0&&n(o.lastweek,""),c-864e5*s.D>0&&n(o.lastmonth,""))))}else r.M?this.showMonthBox():this.showYearBox();var l=i.offset.top,m=i.offset.height,u=i.offset.left;i.offset.width;h.style.top=l+m+"px",u+e.boxWidth>t.innerWidth?(h.style.left=t.innerWidth-e.boxWidth+"px",d.style.left=u-t.innerWidth+e.boxWidth+15+"px"):(h.style.left=u+"px",d.style.left="10%");return l-(t.innerHeight-e.boxHeight-m)},getDate:function(t){var e=t?new Date(t):new Date,s={d:e,Y:e.getFullYear(),M:e.getMonth()+1,D:e.getDate(),w:e.getDay()||7,h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};return s.Ms=this.toFiexd(s.M),s.Ds=this.toFiexd(s.D),s.hs=this.toFiexd(s.h),s.ms=this.toFiexd(s.m),s.ss=this.toFiexd(s.s),s},toFiexd:function(t){return t>9?t:"0"+t},judgeRange:function(){var t=this.state.focus;t.min?"string"==typeof t.min?this.minDate=this.judgeDateStr(t.min):this.minDate=t.min:this.minDate=this.judgeDateStr("Y5"),t.max?"string"==typeof t.max?this.maxDate=this.judgeDateStr(t.max,1):this.maxDate=t.max:this.maxDate=this.judgeDateStr("Y5",1)},judgeDateStr:function(t,e){if("now"==t)return this.getDate();var s=t.match(/[YMD]\d+(?!\d)/g);if(s){for(var i={},a=0;a<s.length;a++)i[s[a].match(/[YMD]/)[0]]=~~s[a].match(/\d+/)[0];if(!e)for(var n in i)i[n]=-i[n];return this.judgeDate(i)}return!!(i=this.initDate(t,e))&&this.getDate(i.str)},judgeDate:function(t,e){return e=e||this.getDate(),t.D&&e.d.setDate(e.D+t.D),t.M&&e.d.setMonth(e.M+t.M-1),t.Y&&e.d.setFullYear(e.Y+t.Y),this.getDate(e.d.getTime())},judgeDay:function(t,e){return 13==e&&(t++,e=1),0==e&&(t--,e=12),2!=e?this.day[e-1]:t%4?this.day[1][0]:this.day[1][1]},initDate:function(t,e){for(var s=(e=e||this.format).str.replace(/YYYY(?!Y)/,0).replace(/MM(?!M)/,1).replace(/DD(?!D)/,2).replace(/hh(?!h)/,3).replace(/mm(?!m)/,4).replace(/ss(?!s)/,5).replace(/\D/g," ").split(" "),i=t.replace(/\D/g," ").split(" "),a=[],n=0;n<i.length;n++)s[n]&&(a[s[n]]=i[n]);return void 0!=a[0]&&void 0!=a[1]&&void 0!=a[2]&&(t=a[0]+"/"+a[1]+"/"+a[2],void 0!=a[3]&&(t+=" ",t+=a[3],a[4]||(a[4]="00"),t+=":",t+=a[4],a[5]||(a[5]="00"),t+=":",t+=a[5]),{arr:a,str:t})},mosaicDateStr:function(t,e){return(e=e||this.format).str.replace(/YYYY(?!Y)/,t.Y).replace(/MM(?!M)/,this.toFiexd(t.M)).replace(/DD(?!D)/,this.toFiexd(t.D)).replace(/hh(?!h)/,this.toFiexd(t.h)).replace(/mm(?!m)/,this.toFiexd(t.m)).replace(/ss(?!s)/,this.toFiexd(t.s))},sortDate:function(t,e,s){s=s||this.format;var i,a;return new Date(this.initDate(t,s).str)>new Date(this.initDate(e,s).str)?(i=t,a=e):(i=e,a=t),{max:i,min:a}},setBtnMsg:function(t,e){this.doms.btn.innerHTML=t+"年"+this.toFiexd(e)+"月"},setCurrent:function(t,e){this.state.step[1]||this.createDayBox(),this.showMonth(t,e),this.state.Y=t,this.state.M=e,this.setBtnMsg(t,e),this.doms.year.setAttribute("data-month",e-1),this.showMonth(t,e+1),this.showMonth(t,e-1)},showMonth:function(t,e){if(e<1||e>12)return!1;this.state.doneMonth&&t==this.state.Y||(this.state.doneMonth={}),this.state.doneMonth[e]||(this.doms.months[e-1].innerHTML=this.mosaicMonth(t,e),this.state.doneMonth[e]=!0)},mosaicMonth:function(t,e){if(this.cache[t]||(this.cache[t]={}),!this.cache[t][e]){var s="<div class='-bg-month'>"+e+"</div>",i=this.getDate(t+"/"+e).w,a=this.judgeDay(t,e),n=this.judgeDay(t,e-1);return s+=this.mosaicDay(i,n-i),s+=this.mosaicDay(a),i+=a,s+=this.mosaicDay(42-i),this.cache[t][e]=s,s}return this.cache[t][e]},mosaicDay:function(t,e){this.getDate();var s="";e=e||0;for(var i=0;i<t;i++)s+="<button class='-date-picker-date",(t<28||e>0)&&(s+=" un' data-skip='",s+=e>0?"prev":"next"),s+="'>",i+e<9&&(s+="&ensp;"),s+=i+e+1,s+="</button>";return s},prevMonth:function(){var t=this.state.Y,e=this.state.M;1==e?(t--,e=13,this.setDayBoxCss()):this.setDayBoxCss(0),this.setCurrent(t,e-1)},nextMonth:function(){var t=this.state.Y,e=this.state.M;12==e?(t++,e=0,this.setDayBoxCss()):this.setDayBoxCss(0),this.setCurrent(t,e+1)},setDayBoxCss:function(t){var e=this.doms.year;"number"==typeof t?0==t?e.style.cssText="transition:transform 300ms;":(t=-t,e.style.cssText="-webkit-transform: translateY("+t+"px) translateZ(0);-moz-transform: translateY("+t+"px) translateZ(0);-ms-transform: translateY("+t+"px) translateZ(0);-o-transform: translateY("+t+"px) translateZ(0);transform: translateY("+t+"px) translateZ(0);"):e.style.cssText=""},showMonthBox:function(){this.state.step[3]||this.createMonthBox();for(var t=this.doms,e=this.minDate,s=this.maxDate,i=e.Y-4,a=s.Y+4,r=this.state.cY||this.state.Y||this.getDate().Y,o="",h=i;h<=a;h++)o+="<button class='-d-p-s-y'",(h<e.Y||h>s.Y)&&(o+=" style='color:#999'"),o+=">",o+=h,o+="</button>";t.touchBox.innerHTML=o,this.setMonthBox(r),n(t.box,"-date-picker -month")},setMonthBox:function(t){t=t||0;var e=this.minDate,s=this.maxDate;t=t<e.Y?e.Y:t>s.Y?s.Y:t;var i=this.doms,a=t-e.Y+4,r=i.touchBox;if(i.yearDrag.setAttribute("data-jump",a),a*=-1,r.style.cssText="                transition:left 300ms;                -webkit-transform: translateZ(0);                -moz-transform: translateZ(0);                -ms-transform: translateZ(0);                -o-transform: translateZ(0);                transform: translateZ(0);                left: "+a+"00%;",i.yearDrag.setAttribute("data-year",t),t!=e.Y)if(t!=s.Y)n(i.monthBtns,"-d-p-s-month");else for(o=0;o<12;o++)o+1>s.M?n(i.monthBtns[o],"-d-p-s-month un"):n(i.monthBtns[o],"-d-p-s-month");else for(var o=0;o<12;o++)o+1<e.M?n(i.monthBtns[o],"-d-p-s-month un"):n(i.monthBtns[o],"-d-p-s-month")},showYearBox:function(){this.state.step[4]||this.createYearBox();var t,e,s=this.minDate,i=this.maxDate,a=s.Y-4,r=i.Y+4,o=this.state.cY||this.state.Y||this.getDate().Y,h=this.doms,d=h.yearRnage,c=h.yearBox,l="";d.innerText=s.Y+" - "+i.Y,r+=(t=r-a)<12?12-t:3-(t=(t%=3)||3);for(var m=a;m<r;m++)l+="<button class='-d-p-s-year",m<s.Y||m>i.Y?l+=" un":m==o&&(l+=" in"),l+="' date-year='",l+=m,l+="'>",l+=m,l+="</button>";c.innerHTML=l,e=~~((o-a)/3)-1,this.setYearBox(e,1),n(h.box,"-date-picker -year")},setYearBox:function(t,e){var s,i="";e&&(i+="transition:transform 300ms;",s=this.doms.yearBox.childNodes.length/3-4,t=t<0?0:t>s?s:t),this.doms.yearBox.setAttribute("data-row",t),i+="                -webkit-transform:translateY("+(t*=-25)+"%) translateZ(0);                -moz-transform:translateY("+t+"%) translateZ(0);                -ms-transform:translateY("+t+"%) translateZ(0);                -o-transform:translateY("+t+"%) translateZ(0);                transform:translateY("+t+"%) translateZ(0);",this.doms.yearBox.style.cssText=i},touchS:function(e,s){s=s||t.event;var i=event.touches[0],a=this.doms;switch(e){case a.dayBox:this.touch={sy:i.clientY,my:i.clientY,bh:a.dayBox.offsetHeight};break;case a.yearDrag:this.touch={Y:~~a.yearDrag.getAttribute("data-year"),j:~~a.yearDrag.getAttribute("data-jump"),sx:i.clientX,mx:i.clientX,bw:a.touchBox.offsetWidth};break;case a.yearBox:this.touch={sy:i.clientY,my:i.clientY,ro:~~a.yearBox.getAttribute("data-row"),bh:a.yearBox.offsetHeight/4}}return!1},touchM:function(e,s){s=s||t.event;var i=this.doms;switch(e){case i.dayBox:var a=this.state.M-1,n=s.touches[0].clientY;this.touch.my=n,this.setDayBoxCss(a*this.touch.bh+this.touch.sy-n);break;case i.yearDrag:var r=s.touches[0].clientX;(o=this.touch).mx=r,i.touchBox.style.cssText="left:"+-100*((o.sx-r)/o.bw+o.j)+"%;";break;case i.yearBox:n=s.touches[0].clientY;var o=this.touch;this.touch.my=n,this.setYearBox((o.sy-n)/o.bh+o.ro)}return!1},touchE:function(e,s){s=s||t.event;var i=this.touch,a=this.doms;switch(e){case a.dayBox:if(i.my===i.sy)return!1;var n=i.my-i.sy;Math.abs(n)>=i.bh/4?n>0?this.prevMonth():n<0&&this.nextMonth():this.setDayBoxCss(0);break;case a.yearDrag:if(i.mx===i.sx)return!1;var r=i.Y+(i.sx-i.mx)/i.bw;r%1>=.5&&r++,this.setMonthBox(~~r);break;case a.yearBox:if(i.my===i.sy)return!1;var o=(i.sy-i.my)/i.bh+i.ro;o%1>=.5&&o++,this.setYearBox(~~o,1)}return!1},mouseW:function(e,s){if(this.state.wheel)return!1;this.state.wheel=!0,s=s||t.event,this.disabledEvent(s);var i=this.doms;if(this.isFF)if(s.detail>0)switch(e){case i.dayBox:this.nextMonth();break;case i.yearDrag:this.setMonthBox(1+~~e.getAttribute("data-year"));break;case i.yearBox:this.setYearBox(1+~~e.getAttribute("data-row"),1)}else switch(e){case i.dayBox:this.prevMonth();break;case i.yearDrag:this.setMonthBox(e.getAttribute("data-year")-1);break;case i.yearBox:this.setYearBox(e.getAttribute("data-row")-1,1)}else if(s.wheelDelta>0)switch(e){case i.dayBox:this.prevMonth();break;case i.yearDrag:this.setMonthBox(e.getAttribute("data-year")-1);break;case i.yearBox:this.setYearBox(e.getAttribute("data-row")-1,1)}else switch(e){case i.dayBox:this.nextMonth();break;case i.yearDrag:this.setMonthBox(1+~~e.getAttribute("data-year"));break;case i.yearBox:this.setYearBox(1+~~e.getAttribute("data-row"),1)}return this.state.wheel=!1,!1},clickEv:function(s,i){i=i||t.event,this.disabledEvent(i);var a=this.doms;switch(s){case a.btnBox:this.showMonthBox();break;case a.yearDrag:this.showYearBox();break;case a.today:case a.yesterday:case a.lastweek:case a.lastmonth:break;case a.dayBox:if(!(x=h(i.target,".-date-picker-date")))return!1;var n=x.innerText;if("-date-picker-date un"==x.className){var r=x.getAttribute("data-skip");if(r){var d=this.state.M;if(this[r+"Month"](),d!=this.state.M){d=this.state.M-1;for(var c,l=o(this.doms.months[d],"-date-picker-date"),m=0;m<42;m++)if("-date-picker-date"==l[m].className&&l[m].innerText==n){c=l[m];break}c&&function(t,s){if(e.createEventObject){var i=e.createEventObject();return t.fireEvent("on"+s,i)}(i=e.createEvent("HTMLEvents")).initEvent(s,!0,!0),t.dispatchEvent(i)}(c,"click")}}}else{var u=this.state,v=u.Y,f=(d=u.M,~~n),p=u.focus,b=this.mosaicDateStr({Y:v,M:d,D:f,h:0,m:0,s:0},p.format);p.el.value=b,this.hidePicker(),this.api.value=b,this.api.callback&&this.api.callback({val:b})}break;case a.prevYear:this.setYearBox(a.yearBox.getAttribute("data-row")-1,1);break;case a.nextYear:this.setYearBox(1+~~a.yearBox.getAttribute("data-row"),1);break;case a.monthBox:var x;if(!(x=h(i.target,".-d-p-s-month")))return!1;d=~~x.getAttribute("data-month")}return!1}},t.DatePicker=c);function i(t){return e.createElement(t)}function a(t,e){if(1==t.nodeType)t.style.display=e;else for(var s=0;s<t.length;s++)t[s].style.display=e}function n(t,e){if(1==t.nodeType)t.className=e;else for(var s=0;s<t.length;s++)t[s].className=e}function r(e,s,i,a){a?e.removeEventListener?e.removeEventListener(s,i):e.detachEvent?(e.detachEvent("on"+s,e[s+i]),e[s+i]=null,e["e"+s+i]=null):e["on"+s]=null:e.addEventListener?e.addEventListener(s,i):e.attachEvent?(e["e"+s+i]=i,e[s+i]=function(){e["e"+s+i](t.event)},e.attachEvent("on"+s,e[s+i])):e["on"+s]=i}function o(t,e){if(t.getElementsByClassName)return t.getElementsByClassName(e);for(var s=[],i=t.getElementsByTagName("*"),a=0;a<i.length;a++)for(var n=i[a].className.split(" "),r=0;r<n.length;r++)if(n[r]===e){s.push(i[a]);break}return s}function h(t,e){if(e.nodeType&&1==e.nodeType)for(;t&&t!=e;)t=t.parentElement;else{var s=e.split("");if("."==s[0])for(e=e.replace(".","");t;){if(t.className){s=t.className.split(" ");for(var i=!1,a=0;a<s.length;a++)if(s[a]==e){i=!0;break}if(i)break}t=t.parentElement}else if("#"==s[0])for(e=e.replace("#","");t&&t.id!=e;)t=t.parentElement;else for(;t&&t.nodeName.toLowerCase()!=e;)t=t.parentElement}return t}function d(t){var e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight};for(t=t.offsetParent;null!=t;)e.top+=t.offsetTop,e.left+=t.offsetLeft,t=t.offsetParent;return e}function c(t){return console.time("初始化时间选择器"),this.monthEn=["Jan","Fed","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.month=["一","二","三","四","五","六","七","八","九","十","十一","十二"],this.week=["日","一","二","三","四","五","六"],this.day=[31,[28,29],31,30,31,30,31,31,30,31,30,31],this.isFF=/.*Firefox.*/.test(navigator.userAgent),this.doms={},this.datas={},this.state={},this.cache={},this.touch={},this.check={},this.maxId=(new Date).getTime(),this.init(t),console.timeEnd("初始化时间选择器"),this.api}}(window,document);